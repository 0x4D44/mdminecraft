# Vanilla Parity Implementation Journal

**Date:** 2025-12-19  
**Repo:** `/home/md/language/mdminecraft`  
**Plan:** `wrk_docs/2025.12.18 - PLN - Feature Gap Closure Plan toward Vanilla Minecraft.md`  

---

## 2025-12-19

### Stage 3 — Farming expansion: carrots + potatoes (+ baked potato)

- Added dropped-item support for **carrot**, **potato**, and **baked potato** (stable IDs appended), plus dropped↔core conversion mappings so pickup/drop works end-to-end.
- Extended core food types to include **Carrot**, **Potato**, and **BakedPotato**, and tuned hunger restore values.
- Expanded right-click farmland interactions:
  - wheat seeds → wheat (`wheat_0`)
  - carrot → carrots (`carrots_0`)
  - potato → potatoes (`potatoes_0`)
  - clicks on farmland now “belong” to planting attempts (so they don’t accidentally eat the held food when the spot is blocked).
- Added vanilla-ish deterministic drops:
  - mature carrots/potatoes drop extra produce in addition to the base drop.
- Added a vanilla-ish deterministic acquisition path:
  - zombies can drop carrots/potatoes (small deterministic chance) to bootstrap farming.
- Added furnace parity:
  - potato → baked potato smelting recipe in the world furnace.

### Verification (post-change 77)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

### Stage 3 — Brewing: gunpowder → splash potions

- Added `bottle_is_splash` to `BrewingStandState` (serde-defaulted for backwards-compatible deserialization) and implemented the gunpowder brewing step to convert drinkable potions into splash variants.
- Wired client↔world mappings so gunpowder is accepted as a brewing ingredient and bottles preserve splash state through the UI/hotbar.
- Added dropped-item support for splash potions so dropping/spilling/brewing-stand-break drops are safe.
- Added a micro snapshot for the gunpowder→splash conversion step.

### Verification (post-change 78)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

### Stage 3 — Brewing expansion: spider eyes → poison

- Added dropped-item support for **spider eyes** (stable IDs appended) and wired dropped↔core conversion so pickup/drop works end-to-end.
- Added a client-side core item ID for spider eyes and mapped it into the brewing ingredient pipeline (`SPIDER_EYE`), enabling brewing stand UI placement and shift-move.
- Added vanilla-ish deterministic spider-eye drops to spiders (0–1 per kill) to support acquiring the ingredient in survival.
- Added a micro snapshot covering **Awkward + Spider Eye → Poison**.

### Verification (post-change 79)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

### Stage 3 — Brewing expansion: golden carrots → night vision

- Added `FoodType::GoldenCarrot` (edible) and dropped-item support so pickup/drop works end-to-end.
- Added a vanilla-ish crafting recipe: **carrot + gold ingot → golden carrot**.
- Wired brewing ingredient mapping so golden carrots are accepted by the brewing stand (enables **Awkward + Golden Carrot → Night Vision**).
- Added unit coverage for crafting + brewing-slot shift-move behavior and conversion mappings.

### Verification (post-change 80)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

### Stage 3 — Sugar cane + paper/books chain (+ brewing sugar → swiftness)

- Added **sugar cane** as a real block (appended to `config/blocks.json` and block ID constants) with:
  - vanilla-ish placement rules (must be on dirt/grass/sand adjacent to water, or stacked on sugar cane)
  - support removal behavior (column breaks when support is removed)
  - deterministic worldgen near water + deterministic growth system
- Added dropped-item support (stable IDs appended) for:
  - **SugarCane** (placeable block item)
  - **Sugar**, **Paper**, **Book** (generic items)
  - plus dropped↔core conversion mappings so pickup/drop/spill works end-to-end.
- Added vanilla-ish crafting chain:
  - sugar cane → sugar
  - 3 sugar cane → 3 paper
  - 3 paper + leather → book
  - updated bookshelf recipe to **6 planks + 3 books → bookshelf** (removes the old wheat placeholder).
- Wired sugar into brewing ingredient mapping so **Awkward + Sugar → Swiftness** is playable via the brewing stand UI.
- Added a micro snapshot covering **Awkward + Sugar → Swiftness**, plus unit coverage for crafting/conversions/support removal.

### Verification (post-change 81)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`

### Stage 3 — Brewing expansion: brown mushrooms + fermented spider eye

- Added **brown mushrooms** as a real block (appended to `config/blocks.json` as ID 105) with:
  - vanilla-ish placement rules (top-face only; requires a solid support block)
  - support removal behavior (pops if the supporting block is removed)
  - deterministic worldgen (cave-ish placements; constrained to avoid altering surface-scanning worldtests)
- Added dropped-item support (stable IDs appended) for:
  - **BrownMushroom** (placeable block item)
  - **FermentedSpiderEye** (brewing ingredient item)
  - plus dropped↔core conversion mappings so pickup/drop/spill works end-to-end.
- Added a vanilla-ish crafting recipe:
  - **brown mushroom + sugar + spider eye → fermented spider eye** (shapeless; works in 2×2).
- Wired fermented spider eyes into the brewing ingredient pipeline (`FERMENTED_SPIDER_EYE`), enabling brewing stand UI placement + shift-move.
- Added a micro snapshot covering **Swiftness + Fermented Spider Eye → Slowness**, plus unit coverage for crafting, shift-move, and conversion mappings.

### Verification (post-change 82)

- `cargo fmt --all`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo test --workspace`
