# Minecraft Feature Parity Implementation - Comprehensive Roadmap

**Goal:** Implement missing Minecraft features to achieve ~60-70% feature parity with Minecraft Java Edition, focusing on core gameplay systems first.

**Current State:** ~15-20% feature complete with excellent technical foundation (deterministic simulation, modern cave generation, networking)

**Target State:** Fully playable survival experience with progression systems, diverse content, and multiplayer support

---

## PHASE 1: Core Survival Tools & Progression (CRITICAL - Week 1-2)

### 1.1 Tools System - BLOCKING ALL MINING
**Priority:** CRITICAL - Game is unplayable without proper tools

**Implement:**
- Tool types: Pickaxe, Shovel, Axe, Hoe, Sword (all tiers: wood, stone, iron, gold, diamond)
- Tool properties:
  - Durability values (wood: 59, stone: 131, iron: 250, gold: 32, diamond: 1561)
  - Mining speed multipliers (wood: 2x, stone: 4x, iron: 6x, gold: 12x, diamond: 8x)
  - Harvest levels (wood: 0, stone: 1, iron: 2, gold: 0, diamond: 3)
  - Attack damage (sword: +4/5/6/4/7, axe: +7/9/9/7/9)
  - Attack speed (varies by tool type)

**Block Requirements:**
- Update all blocks with `requires_tool` flag and `min_harvest_level`
- Stone/ores require pickaxe
- Dirt/sand require shovel for efficiency
- Wood requires axe for efficiency
- Add `hardness` values affecting break speed

**Crafting Recipes:**
```
Pickaxe: 3 material + 2 sticks (shape: top row 3, middle stick, bottom stick)
Axe: 3 material + 2 sticks (shape: top-left 2 + middle-left, middle stick, bottom stick)
Shovel: 1 material + 2 sticks (vertical line)
Hoe: 2 material + 2 sticks (top row 2, middle stick, bottom stick)
Sword: 2 material + 1 stick (vertical line)
```

**New Items to Add:**
- Wooden/stone/iron/gold/diamond pickaxe, shovel, axe, hoe, sword
- Flint (from gravel mining)
- Flint and steel (1 iron + 1 flint)
- Shears (2 iron ingots)
- Bucket (3 iron ingots) - empty, water, lava, milk variants

**Implementation Files:**
- `crates/core/src/item.rs` - Add tool item types and properties
- `crates/core/src/tool.rs` - New file for tool system logic
- `crates/world/src/block.rs` - Add harvest level requirements
- `src/game.rs` - Update block breaking to check tools
- `config/recipes.json` - Add all tool recipes

**Tests:**
- Test mining stone without pickaxe fails
- Test mining diamond requires iron+ pickaxe
- Test tool durability decrements
- Test mining speed based on tool tier
- Test tool crafting recipes

**Acceptance Criteria:**
- All 5 tool tiers craftable
- Mining speed based on tool type and material
- Blocks require appropriate tools (can't mine stone by hand)
- Tool durability system working
- Diamond ore requires iron pickaxe minimum

---

### 1.2 Hunger & Health System
**Priority:** HIGH - Core survival mechanic

**Implement:**
- Hunger bar (20 points, displayed as 10 drumsticks)
- Saturation (hidden value, 0-20)
- Food consumption mechanics
- Hunger depletion rate:
  - Walking: 0.01/tick
  - Sprinting: 0.1/tick
  - Jumping: 0.05/tick
  - Swimming: 0.01/tick
  - Mining: 0.005/tick

**Health Regeneration:**
- Hunger >= 18: Regenerate 1 HP every 80 ticks (4 seconds)
- Hunger <= 0: Lose 1 HP every 80 ticks
- Peaceful mode: Always regenerate regardless

**Food Items to Add:**
| Food | Hunger | Saturation | Source |
|------|--------|------------|--------|
| Apple | 4 | 2.4 | Tree drops |
| Bread | 5 | 6.0 | Crafted (3 wheat) |
| Raw Porkchop | 3 | 1.8 | Pig drops |
| Cooked Porkchop | 8 | 12.8 | Furnace |
| Raw Beef | 3 | 1.8 | Cow drops |
| Steak | 8 | 12.8 | Furnace |
| Raw Chicken | 2 | 1.2 | Chicken drops |
| Cooked Chicken | 6 | 7.2 | Furnace |
| Carrot | 3 | 3.6 | Farming |
| Potato | 1 | 0.6 | Farming |
| Baked Potato | 5 | 6.0 | Furnace |
| Golden Apple | 4 | 9.6 | Crafted (8 gold + apple) |
| Cookie | 2 | 0.4 | Crafted (2 wheat + cocoa) |
| Cake | 14 | 2.8 | Placeable block, 7 slices |

**Implementation:**
- `crates/core/src/hunger.rs` - New hunger system
- `crates/core/src/food.rs` - Food item properties
- `src/game.rs` - Integrate hunger with health
- UI overlay for hunger bar

**Tests:**
- Test hunger depletes during activity
- Test health regenerates at high hunger
- Test damage taken at zero hunger
- Test food consumption restores hunger
- Test saturation mechanics

---

### 1.3 Experience & Levels System
**Priority:** HIGH - Required for enchanting

**Implement:**
- Experience points (XP) accumulation
- Level calculation: Level N requires total XP = sum formula
  - Level 0-16: 17 XP per level
  - Level 17-31: 3*L^2 - 151*L + 2220
  - Level 32+: 7*L^2 - 1805*L + 117520
- Experience orbs (entity that floats toward player)
- XP drops from:
  - Mining ores: Coal(0-2), Diamond(3-7), Emerald(3-7), Lapis(2-5), Redstone(1-5), Quartz(2-5)
  - Killing mobs: Hostile(5), Passive(1-3), Bosses(50-500)
  - Smelting: 0.1-1.0 XP per item
  - Breeding animals: 1-7 XP

**Implementation:**
- `crates/core/src/experience.rs` - XP system
- `crates/world/src/experience_orb.rs` - Experience orb entity
- Update mob death to drop XP orbs
- Update ore blocks to drop XP on break
- UI overlay for XP bar and level

**Tests:**
- Test XP orb collection
- Test level calculation
- Test XP drops from various sources
- Test XP persistence across deaths

---

## PHASE 2: Enchanting & Brewing (Week 3-4)

### 2.1 Enchanting System
**Priority:** HIGH - Major progression system

**New Blocks:**
- Enchanting Table (4 obsidian + 2 diamond + 1 book)
- Bookshelf (6 planks + 3 books)
- Anvil (3 blocks iron + 4 iron ingots)

**New Items:**
- Book (3 paper + 1 leather)
- Paper (3 sugar cane)
- Enchanted Book (via enchanting)
- Lapis Lazuli (ore and item)

**Enchanting Mechanics:**
- Bookshelf power: Up to 15 bookshelves boost enchanting (2 blocks away, 1 block up)
- Enchantment levels: 1-30 based on bookshelf count
- Lapis cost: 1-3 lapis per enchant
- Level cost: 1-3 levels per enchant

**Core Enchantments to Implement (Priority):**

**Combat:**
- Sharpness I-V (sword/axe): +0.5 to +3.0 damage per level
- Protection I-IV (armor): 4% damage reduction per level
- Fire Aspect I-II (sword): Sets target on fire 4-8 seconds
- Knockback I-II (sword): Increased knockback
- Power I-V (bow): +25% arrow damage per level
- Punch I-II (bow): Increased arrow knockback
- Flame I (bow): Arrows set fire

**Mining:**
- Efficiency I-V (tools): +speed^level mining speed
- Fortune I-III (pickaxe/axe/shovel): Increased drops for ores/crops
- Silk Touch I (tools): Blocks drop themselves (ice, glass, ores)
- Unbreaking I-III (any): (100/(level+1))% durability usage

**Utility:**
- Feather Falling I-IV (boots): Fall damage reduction
- Respiration I-III (helmet): Extended underwater breathing
- Aqua Affinity I (helmet): Normal mining speed underwater
- Depth Strider I-III (boots): Faster swimming

**Implementation:**
- `crates/core/src/enchanting.rs` - Enchantment system
- `crates/core/src/enchantment.rs` - Individual enchantment definitions
- `crates/world/src/enchanting_table.rs` - Enchanting table block entity
- `crates/world/src/anvil.rs` - Anvil combining/repair
- Update tool/armor to store enchantments
- Update combat system to apply enchantment effects

**Tests:**
- Test bookshelf power calculation
- Test enchantment level ranges
- Test enchantment effects (damage, efficiency, etc.)
- Test anvil combining
- Test incompatible enchantments

---

### 2.2 Brewing & Potions System
**Priority:** MEDIUM - Adds combat depth

**New Blocks:**
- Brewing Stand (1 blaze rod + 3 cobblestone)
- Cauldron (7 iron ingots)

**New Items:**
- Glass Bottle (3 glass)
- Water Bottle (glass bottle + water)
- Awkward Potion (water bottle + nether wart - base for all potions)
- Blaze Powder (from blaze rod - brewing fuel)
- Nether Wart (found in nether fortresses)

**Core Potions to Implement:**

**Positive Effects:**
- Healing I-II: Instant health (2/4 hearts)
- Regeneration I-II: Regenerate health over time (0:45/1:30)
- Strength I-II: +3/+6 attack damage (3:00/1:30)
- Swiftness I-II: +20%/+40% speed (3:00/1:30)
- Fire Resistance: Immune to fire/lava (3:00)
- Night Vision: Full brightness at night (3:00)
- Invisibility: Invisible to mobs (3:00)
- Water Breathing: Breathe underwater (3:00)

**Negative Effects:**
- Poison I-II: Damage over time (0:45/1:30)
- Weakness: -4 attack damage (1:30)
- Slowness I-IV: Movement speed reduction (1:30/0:20)
- Harming I-II: Instant damage (3/6 hearts)

**Brewing Recipes:**
```
Base: Water Bottle + Nether Wart â†’ Awkward Potion

Healing: Awkward + Glistering Melon
Regeneration: Awkward + Ghast Tear
Strength: Awkward + Blaze Powder
Swiftness: Awkward + Sugar
Fire Resistance: Awkward + Magma Cream
Night Vision: Awkward + Golden Carrot
Invisibility: Night Vision + Fermented Spider Eye
Water Breathing: Awkward + Pufferfish
Poison: Awkward + Spider Eye
Weakness: Water Bottle + Fermented Spider Eye
Slowness: Swiftness + Fermented Spider Eye
Harming: Healing + Fermented Spider Eye

Modifiers:
+ Redstone â†’ Extended duration
+ Glowstone â†’ Increased level
+ Gunpowder â†’ Splash potion
+ Dragon's Breath â†’ Lingering potion
```

**Status Effect System:**
- Effect duration tracking (ticks)
- Effect amplifier (level)
- Particle effects
- Effect icons in UI
- Effect stacking/overwriting rules

**Implementation:**
- `crates/core/src/effect.rs` - Status effect system
- `crates/core/src/potion.rs` - Potion item types
- `crates/world/src/brewing_stand.rs` - Brewing stand block entity
- `src/game.rs` - Apply status effects to players/mobs
- UI for active effects display

**Tests:**
- Test brewing recipes
- Test potion consumption
- Test effect duration
- Test effect stacking
- Test splash potion area effects

---

## PHASE 3: Structures & World Content (Week 5-7)

### 3.1 Villages
**Priority:** HIGH - Most iconic Minecraft structure

**Village Generation:**
- Village placement: Plains, Desert, Savanna, Taiga biomes
- Village size: Small (5-10 buildings), Medium (11-20), Large (21-30)
- Building types:
  - Small house (4 variants)
  - Large house (3 variants)
  - Butcher shop
  - Library
  - Church
  - Blacksmith (with loot chest!)
  - Farmland (wheat, carrots, potatoes, beetroot)
  - Well (village center)
  - Lamp posts

**Village Structure:**
- Roads connecting buildings (path blocks)
- Central well/meeting point
- Iron golems spawn for protection
- Villagers spawn in houses (2-5 per village)

**Loot Tables:**
- Blacksmith chest:
  - Iron ingots (1-5, 50%)
  - Bread (1-3, 40%)
  - Iron pickaxe (1, 25%)
  - Iron sword (1, 25%)
  - Diamond (1-3, 15%)
  - Saddle (1, 10%)
  - Iron armor pieces (1, 15%)

**Implementation:**
- `crates/world/src/structures/village.rs` - Village generation
- `crates/world/src/structures/mod.rs` - Structure system framework
- `crates/world/src/structure_palette.rs` - Block palette for structures
- Building schematics in `assets/structures/village/`
- Structure placement algorithm (check flatness, avoid oceans)
- Chest block entity with loot tables

**Tests:**
- Test village generation in valid biomes
- Test building connections with paths
- Test loot chest population
- Test no structure overlap
- Test structure preservation across chunk boundaries

---

### 3.2 Temples & Dungeons
**Priority:** MEDIUM - Adds exploration

**Desert Temple:**
- 21Ã—21 sandstone structure
- 4 colored terracotta blocks on top (floor pattern)
- Hidden chamber below with 4 chests
- TNT trap (9 TNT blocks under pressure plate)
- Spawns in desert biomes

**Jungle Temple:**
- Cobblestone/mossy cobblestone structure
- 3 lever puzzle (hidden chest behind)
- Arrow trap (dispensers)
- Spawns in jungle biomes (NEED JUNGLE BIOME FIRST)

**Dungeon (Monster Room):**
- Small 5Ã—5Ã—5 cobblestone/mossy room
- Mob spawner in center (zombie 50%, skeleton 25%, spider 25%)
- 1-2 chests with loot
- Spawns underground during terrain generation

**Mineshaft:**
- Abandoned mine tunnels with rails
- Support beams (fences + planks)
- Cave spider spawners
- Minecart chests with loot
- Cobwebs everywhere

**Implementation:**
- `crates/world/src/structures/temple.rs` - Desert/jungle temples
- `crates/world/src/structures/dungeon.rs` - Monster rooms
- `crates/world/src/structures/mineshaft.rs` - Abandoned mineshafts
- `crates/world/src/spawner.rs` - Mob spawner block entity
- Structure schematics in `assets/structures/`

---

### 3.3 Ocean & Underground Structures
**Priority:** LOW - Nice to have

**Ocean Monument:**
- Large prismarine structure in deep ocean
- Elder guardians (3 per monument)
- Sponge rooms
- Gold blocks hidden inside
- Mining fatigue effect in radius

**Stronghold:**
- Underground fortress leading to End portal
- Libraries, prison cells, corridors
- Silverfish spawners
- Loot chests
- End portal frame (12 blocks, need 12 eyes of ender)

**Buried Treasure:**
- Single chest buried in beach biomes
- Treasure map to find it
- Contains diamonds, iron, gold, emeralds

**Implementation:**
- `crates/world/src/structures/ocean_monument.rs`
- `crates/world/src/structures/stronghold.rs`
- `crates/world/src/structures/treasure.rs`
- Elder guardian entity
- Silverfish entity
- Treasure map item

---

## PHASE 4: More Mobs & AI (Week 8-10)

### 4.1 Villagers & Trading
**Priority:** CRITICAL - Core progression mechanic

**Villager Professions:**
- Farmer: Sells crops, buys wheat/carrots/potatoes
- Librarian: Sells enchanted books, buys paper
- Blacksmith (Armorer): Sells armor, buys coal/iron
- Blacksmith (Weaponsmith): Sells weapons, buys coal/iron
- Blacksmith (Toolsmith): Sells tools, buys coal/iron/diamond
- Butcher: Sells cooked meat, buys raw meat
- Cleric: Sells potions, buys rotten flesh/gold

**Trading System:**
- Each villager has 3-5 trades
- Trades have stock limits (1-12 uses before restocking)
- Villagers restock twice per day (at work station)
- Prices fluctuate based on demand
- Cure zombie villagers for discounts

**Villager Behavior:**
- Wander during day
- Sleep at night (in bed)
- Work at job station during work hours
- Gossip system (affects prices)
- Panic when attacked
- Hide in houses during raids

**Implementation:**
- `crates/world/src/mob/villager.rs` - Villager entity
- `crates/core/src/trading.rs` - Trading system
- `crates/world/src/job_site.rs` - Job site blocks
- UI for trading interface
- Villager AI state machine
- Profession assignment logic

**Tests:**
- Test villager spawning in villages
- Test trading interface
- Test trade restocking
- Test profession assignment
- Test day/night behavior

---

### 4.2 Passive & Neutral Mobs
**Priority:** MEDIUM - Adds life to world

**Horses:**
- Spawn in plains/savanna
- Tameable with apples/carrots
- Rideable when tamed + saddled
- Variants: Horse, Donkey, Mule
- Can equip chest on donkey/mule
- Horse armor

**Wolves:**
- Spawn in taiga biomes
- Tameable with bones
- Follow and protect player
- Attack mobs attacking owner
- Sit/stand commands
- Collars (dyeable)

**Cats:**
- Spawn in villages
- Tameable with raw fish
- Scare away creepers and phantoms
- Sit on beds/furnaces
- Bring gifts at dawn

**Iron Golem:**
- Spawn in villages (2-3 per village)
- Defend villagers from hostile mobs
- 100 HP, deals 7-21 damage
- Drops iron ingots and poppies
- Player-craftable (4 iron blocks + pumpkin)

**Implementation:**
- `crates/world/src/mob/horse.rs`
- `crates/world/src/mob/wolf.rs`
- `crates/world/src/mob/cat.rs`
- `crates/world/src/mob/iron_golem.rs`
- Taming system
- Rideable entity system
- Pet AI (follow, sit, attack for owner)

---

### 4.3 Hostile Mobs (Extended)
**Priority:** MEDIUM - Increases challenge

**Enderman:**
- Spawn in all biomes at night
- Teleports when hit
- Picks up/places blocks
- Aggressive when looked at
- Deals 7 damage (very dangerous)
- Drops ender pearls (for End travel)

**Witch:**
- Spawn in swamp huts
- Throws potions (poison, slowness, weakness, harming)
- Drinks potions (healing, fire resistance, water breathing, swiftness)
- Drops potions, glowstone, redstone, sugar, sticks

**Cave Spider:**
- Spawn in mineshaft spawners
- Smaller than regular spider
- Poisons on hit
- Can fit through 1Ã—1 spaces

**Slime:**
- Spawn in swamp biomes and slime chunks
- Splits into smaller slimes when killed
- Sizes: big (4Ã—4), medium (2Ã—2), small (1Ã—1)
- Drops slimeballs (used for sticky pistons, leads)

**Phantom:**
- Spawn in sky when player hasn't slept for 3+ days
- Flies in circles, swoops to attack
- Burns in daylight
- Drops phantom membrane (slow falling potions)

**Implementation:**
- `crates/world/src/mob/enderman.rs`
- `crates/world/src/mob/witch.rs`
- `crates/world/src/mob/cave_spider.rs`
- `crates/world/src/mob/slime.rs`
- `crates/world/src/mob/phantom.rs`
- Potion throwing AI
- Teleportation mechanics
- Sleep tracking for phantom spawns

---

## PHASE 5: Dimensions (Week 11-14)

### 5.1 The Nether
**Priority:** HIGH - Mid-game dimension

**Nether Generation:**
- Entire dimension at y=0-128
- Lava oceans at y=0-32
- Netherrack as primary block
- 5 biomes:
  - Nether Wastes (netherrack, gravel, soul sand)
  - Crimson Forest (crimson nylium, fungus, warped wart blocks)
  - Warped Forest (warped nylium, fungus, enderman)
  - Soul Sand Valley (soul sand, soul soil, fossils)
  - Basalt Deltas (basalt, blackstone, lava)

**Nether Blocks:**
- Netherrack (mined with any pickaxe, infinite fire on top)
- Soul Sand (slowness effect, spawns wither skeletons)
- Soul Soil (blue fire, no slowness)
- Glowstone (light level 15, drops dust)
- Nether Quartz Ore (drops quartz, used for redstone)
- Nether Gold Ore (drops gold nuggets)
- Ancient Debris (rare, for netherite, fire resistant)
- Magma Block (damages entities, light source)
- Crimson/Warped Nylium, Fungus, Roots
- Basalt, Blackstone, Crying Obsidian
- Nether Wart (grows on soul sand, used for brewing)

**Nether Mobs:**
- Zombie Piglin: Neutral until attacked, then entire group aggressive
- Piglin: Trades gold for items, aggressive without gold armor
- Piglin Brute: Always aggressive, spawns in bastions
- Blaze: Flies, shoots fireballs, spawns in fortresses, drops blaze rods
- Ghast: Flies, shoots explosive fireballs, drops ghast tears
- Magma Cube: Like slime but fire immune, spawns near lava
- Wither Skeleton: Spawns in fortresses, wither effect on hit, drops coal/bones/skulls

**Nether Structures:**
- Nether Fortress (brick structure with blaze spawners, nether wart farms)
- Bastion Remnant (piglin settlement with loot chests, gold blocks)
- Ruined Portal (partially built portal in overworld and nether)

**Nether Portal:**
- 4Ã—5 obsidian frame (10 obsidian blocks)
- Light with flint and steel
- Teleports to nether (divide coords by 8)
- Creates return portal automatically
- Loading screen while traveling

**Implementation:**
- `crates/world/src/dimension/nether.rs` - Nether dimension
- `crates/world/src/nether_terrain.rs` - Nether terrain generation
- `crates/world/src/nether_biomes.rs` - Nether biomes
- `crates/world/src/portal.rs` - Portal mechanics
- `crates/world/src/structures/nether_fortress.rs`
- `crates/world/src/structures/bastion.rs`
- All nether mob implementations
- Dimension switching in world manager

**Tests:**
- Test portal creation
- Test nether coordinate conversion (8:1 ratio)
- Test nether terrain generation
- Test nether mob spawning
- Test ancient debris rarity

---

### 5.2 The End
**Priority:** MEDIUM - End-game dimension

**End Generation:**
- Main island with obsidian pillars
- Outer islands with end cities
- Void below y=0 (instant death)
- End stone as primary block
- Chorus plants on outer islands

**End Boss:**
- Ender Dragon (200 HP)
- Flies around, perches on portal
- Fireball attacks, diving attacks
- End crystals heal dragon (destroy them first)
- Drops dragon egg and massive XP
- Respawnable with 4 end crystals on portal

**End Structures:**
- Exit portal (spawns after dragon death)
- End gateway portals (to outer islands)
- End cities (purpur towers with shulkers, elytra in ships)

**End Blocks:**
- End Stone (main terrain)
- End Stone Bricks (end city material)
- Purpur Blocks, Pillars, Slabs, Stairs
- End Rods (light source)
- Chorus Plant/Flower (teleports when eaten)
- Dragon Egg (decorative trophy)

**End Mobs:**
- Enderman (more common than overworld)
- Shulker (shoots levitation projectiles, hides in shell, drops shulker shells)

**Implementation:**
- `crates/world/src/dimension/end.rs`
- `crates/world/src/end_terrain.rs`
- `crates/world/src/structures/end_city.rs`
- `crates/world/src/mob/ender_dragon.rs`
- `crates/world/src/mob/shulker.rs`
- Boss fight mechanics
- End crystal entities

---

## PHASE 6: Blocks & Building (Week 15-17)

### 6.1 Decorative Blocks
**Priority:** MEDIUM - Creative building

**Concrete (16 colors):**
- Crafted from concrete powder + water
- All 16 dye colors
- Smooth, modern look

**Terracotta (16 colors + glazed):**
- Hardened clay + dye = colored terracotta
- Smelting colored terracotta = glazed terracotta
- Glazed has directional patterns

**Wool & Carpet (16 colors):**
- White wool from sheep
- Dye wool for colors
- 2 wool = 3 carpet
- Carpet as 1/16 block height

**Glass Variants:**
- Stained glass (16 colors)
- Glass panes (thin vertical)
- Stained glass panes
- Tinted glass (blocks light)

**Wood Variants:**
- 9 wood types: Oak, Spruce, Birch, Jungle, Acacia, Dark Oak, Mangrove, Cherry, Bamboo
- Each has: logs, planks, stairs, slabs, fences, gates, doors, trapdoors, buttons, pressure plates
- Stripped variants (use axe on logs)

**Stone Variants:**
- Smooth stone (smelt cobblestone)
- Stone bricks (craft from stone)
- Mossy variants (stone bricks + vines)
- Cracked variants (smelt stone bricks)
- Chiseled variants (craft from slabs)

**Decorative Blocks:**
- Flower pot (plantable flowers/saplings)
- Item frame (display items)
- Armor stand (display armor)
- Banner (16 colors + patterns)
- Painting (random art)
- Bookshelf (decorative, helps enchanting)

**Implementation:**
- Add all block variants to `config/blocks.json`
- Texture atlas updates
- Crafting/smelting recipes
- Block models for non-full blocks
- Directional placement for glazed terracotta

---

### 6.2 Functional Blocks
**Priority:** MEDIUM - Gameplay utility

**Beacon:**
- Crafted from nether star + obsidian + glass
- Requires pyramid base (iron/gold/diamond/emerald blocks)
- Provides status effects in radius
- Effects: Speed, Haste, Resistance, Jump Boost, Strength, Regeneration
- Tier based on pyramid size (1-4)

**Anvil:**
- Repair tools/armor
- Combine enchantments
- Rename items
- Costs experience levels
- Durability (3 stages: anvil â†’ chipped â†’ damaged â†’ breaks)

**Smithing Table:**
- Upgrade diamond â†’ netherite gear
- Requires netherite ingot + diamond item
- Preserves enchantments

**Grindstone:**
- Remove enchantments (returns some XP)
- Repair items without materials
- No anvil penalty

**Loom:**
- Apply banner patterns
- No dye waste
- 6 pattern slots

**Stonecutter:**
- Convert stone blocks efficiently
- 1 block â†’ 1 stair/slab (better than crafting)

**Composter:**
- Convert plant matter â†’ bonemeal
- 7 stages of composting
- Different items have different success rates

**Barrel:**
- Storage like chest
- Opens when blocked above (unlike chest)

**Blast Furnace & Smoker:**
- 2Ã— speed smelting
- Blast furnace: ores and armor
- Smoker: food only

**Hopper:**
- Transfers items between containers
- 5 slot inventory
- Points into adjacent containers

**Implementation:**
- `crates/world/src/blocks/beacon.rs`
- `crates/world/src/blocks/anvil.rs`
- `crates/world/src/blocks/smithing_table.rs`
- `crates/world/src/blocks/hopper.rs`
- UI for each functional block
- Item transfer system for hoppers

---

### 6.3 Redstone (Advanced)
**Priority:** LOW - Technical players

**Currently Have:**
- Wire, torch, lamp, lever, button, pressure plate

**Add:**
- Repeater (1-4 tick delay, signal boost, one-way)
- Comparator (compare signal strength, subtraction mode)
- Observer (detects block updates, outputs 1-tick pulse)
- Piston (pushes blocks, up to 12)
- Sticky Piston (pulls blocks back)
- Dispenser (shoots items/arrows/potions)
- Dropper (drops items)
- Hopper (transfers items, can be locked)
- Daylight Sensor (outputs signal based on time)
- Target Block (outputs signal when hit by projectile)
- Note Block (plays notes, 25 instruments)

**Redstone Components:**
- Doors/trapdoors respond to redstone
- Rails: powered, detector, activator
- TNT ignites with redstone

**Implementation:**
- `crates/world/src/redstone/repeater.rs`
- `crates/world/src/redstone/comparator.rs`
- `crates/world/src/redstone/piston.rs`
- `crates/world/src/redstone/dispenser.rs`
- Block update detection system
- Piston push/pull mechanics

---

## PHASE 7: Plants & Farming (Week 18-19)

### 7.1 More Crops
**Priority:** MEDIUM - Adds farming variety

**Currently Have:** Wheat, Carrots, Potatoes

**Add:**
- **Beetroot**: 4 growth stages, craft into soup or dye
- **Pumpkin**: Grows on farmland, stem + fruit block, craft into pie
- **Melon**: Grows on farmland, stem + fruit block, slices for food
- **Sugar Cane**: Grows near water, 3 blocks tall, craft into paper/sugar
- **Cocoa Beans**: Grows on jungle log sides, 3 stages, used in cookies/brown dye
- **Nether Wart**: Grows on soul sand in nether, essential for brewing
- **Sweet Berry Bush**: Grows in taiga, damages on contact, food source
- **Bamboo**: Grows quickly, used for scaffolding and pandas

**Farming Mechanics:**
- Bone meal for instant growth
- Composter for renewable bone meal
- Farmland trampling (jump on farmland â†’ dirt)
- Crop trampling prevention (paths around farms)

**Implementation:**
- Add crop blocks to `config/blocks.json`
- `crates/world/src/crops/` - Crop growth system
- Bone meal item and growth acceleration
- Update terrain generation for natural spawns

---

### 7.2 Plants & Flowers
**Priority:** LOW - World beauty

**Flowers (generate in biomes):**
- Dandelion, Poppy, Blue Orchid, Allium, Azure Bluet
- Red/White/Pink Tulips, Oxeye Daisy, Cornflower, Lily of the Valley
- Sunflower, Lilac, Rose Bush, Peony (2 blocks tall)
- All flowers craft into dye

**Other Plants:**
- Tall Grass, Fern (2 variants)
- Double Tall Grass, Large Fern (2 blocks)
- Dead Bush (desert decoration)
- Vines (climbable, grows on trees)
- Lily Pad (floats on water)
- Mushrooms (red, brown - generate in dark areas)
- Kelp, Seagrass (underwater plants)

**Trees:**
- Currently have: Oak, Spruce, Birch
- Add: Jungle, Acacia, Dark Oak, Mangrove, Cherry
- Each with unique generation patterns

**Implementation:**
- Add to biome decoration
- `crates/world/src/decoration/flowers.rs`
- `crates/world/src/trees/` - Add new tree types
- Climbable flag for vines
- Kelp growth in oceans

---

## PHASE 8: Advanced Mobs & Entities (Week 20-22)

### 8.1 Water Mobs
**Priority:** MEDIUM - Ocean content

**Guardian:**
- Spawns in ocean monuments
- Laser beam attack (locks on, damages when charged)
- Spikes deal damage when hit
- Drops prismarine shards/crystals

**Elder Guardian:**
- 3 per ocean monument
- Mining Fatigue III in large radius
- Boss-level health
- Drops sponge

**Drowned:**
- Zombie variant that spawns in oceans
- Can spawn with trident (rare drop)
- Throws trident at range
- Can swim and walk on land

**Dolphin:**
- Friendly, swims in groups
- Can lead players to treasure
- Attacks hostile mobs in water
- Speed boost when swimming near

**Fish:**
- Cod, Salmon, Pufferfish, Tropical Fish
- Can be caught with fishing rod
- Tropical fish have many variants
- Pufferfish poisons on contact

**Squid & Glow Squid:**
- Ambient water creatures
- Drops ink sacs
- Glow squid drops glow ink sacs

**Implementation:**
- `crates/world/src/mob/guardian.rs`
- `crates/world/src/mob/fish.rs`
- `crates/world/src/mob/dolphin.rs`
- Underwater movement AI
- Laser beam rendering
- Trident projectile

---

### 8.2 Utility Entities
**Priority:** LOW - Nice polish

**Item Frame:**
- Placed on walls
- Displays any item
- Can rotate item (8 rotations)
- Drops item when broken

**Armor Stand:**
- Displays armor/items
- Can pose arms/body
- Right-click to swap equipment
- Can be decorated

**Minecarts:**
- Minecart (empty, rideable)
- Minecart with Chest (mobile storage)
- Minecart with Furnace (powered, pushes others)
- Minecart with Hopper (collects items)
- Minecart with TNT (explodes on impact)

**Boats:**
- Wood boat variants (5 types)
- Chest boat variants (storage)
- Fast water travel
- Can carry 2 entities

**Other Entities:**
- Painting (multiple art variants)
- TNT (primed explosive)
- Arrow (shot from bow)
- Thrown items (snowball, egg, ender pearl)
- Fishing bobber
- Experience orb
- Item (dropped item entity)

**Implementation:**
- `crates/world/src/entity/item_frame.rs`
- `crates/world/src/entity/armor_stand.rs`
- `crates/world/src/entity/minecart.rs`
- `crates/world/src/entity/boat.rs`
- Rail system for minecarts
- Water physics for boats

---

## PHASE 9: Polish & Features (Week 23-25)

### 9.1 Player Mechanics
**Priority:** HIGH - QoL improvements

**Movement:**
- Sprinting (double-tap W or sprint key, 30% faster, drains hunger)
- Swimming (full underwater movement, 8 blocks/sec)
- Crawling (1 block tall, through 1-high spaces)
- Flying (creative mode only, double-jump to toggle)
- Elytra gliding (equipped in chest slot, momentum-based flight)

**Combat:**
- Attack cooldown (1.6 second swing speed for swords)
- Sweeping attack (hits multiple mobs)
- Critical hits (jump and hit mid-air for 50% more damage)
- Shield blocking (crafted, blocks 100% of damage from front)
- Offhand slot (dual wielding, shield/torch/food)

**Inventory:**
- Armor slots (4 pieces)
- Offhand slot (left hand)
- Crafting grid (2Ã—2 in inventory)
- Recipe book (shows all known recipes)
- Quick-swap (press F to move item to offhand)

**World Interaction:**
- Block placement direction (stairs, slabs face toward player)
- Shift-clicking to bypass UI (place on chest without opening)
- Middle-click (creative): copy block with NBT
- F3 debug screen (coordinates, biome, light level, FPS)

**Implementation:**
- `src/input.rs` - Update input handling
- `src/player.rs` - Add movement states
- `src/combat.rs` - Attack cooldown system
- UI improvements for inventory
- Offhand rendering

---

### 9.2 Multiplayer Polish
**Priority:** MEDIUM - Better multiplayer

**Features:**
- Player list (Tab key shows all online players)
- Chat system (T to open, supports commands)
- Player skins (load from Mojang API or custom)
- Nametags (show player name above head)
- Spectator mode (fly through blocks, no collision)
- Server console (admin commands)
- Whitelist/banlist
- Server properties (max players, PVP, difficulty)

**Commands:**
- `/tp <player> <x> <y> <z>` - Teleport
- `/give <player> <item> <count>` - Give items
- `/time set <day|night>` - Set time
- `/weather <clear|rain|thunder>` - Set weather
- `/gamemode <survival|creative|spectator>` - Change gamemode
- `/difficulty <peaceful|easy|normal|hard>` - Set difficulty
- `/kill <player>` - Kill player
- `/effect <player> <effect> <duration> <amplifier>` - Give status effect

**Implementation:**
- `crates/net/src/chat.rs` - Chat system
- `crates/net/src/commands.rs` - Command parser
- `src/ui/playerlist.rs` - Player list UI
- Server administration features
- Player authentication (optional)

---

### 9.3 Audio & Atmosphere
**Priority:** LOW - Immersion

**Sounds:**
- Block sounds (break, place, step)
- Mob sounds (idle, hurt, death)
- Ambient sounds (cave sounds, water, rain)
- Music (creative/survival themes)
- UI sounds (button click, inventory)

**Music Discs:**
- 13 music discs found in dungeon chests
- Play in jukebox
- Each has unique track

**Particles:**
- Block break particles
- Mob death particles
- Enchanting particles
- Potion effect particles
- Critical hit particles
- Fire/smoke particles
- Water splash particles
- Portal particles

**Weather Effects:**
- Rain (reduces skylight, makes wet sounds)
- Thunder (lightning strikes, sets fires)
- Snow (in cold biomes, accumulates)
- Fog (in certain biomes)

**Day/Night:**
- Currently have basic cycle
- Add proper skybox colors (sunset/sunrise)
- Moon phases (affects slime spawning)
- Star rendering at night

**Implementation:**
- `crates/audio/` - Audio system using rodio
- `src/particles.rs` - Particle system
- `src/weather.rs` - Expand weather system
- `src/sky.rs` - Skybox rendering
- Asset files for sounds/music

---

## PHASE 10: Optimization & Bug Fixes (Week 26-28)

### 10.1 Performance
**Priority:** CRITICAL - Must run smoothly

**Rendering:**
- Chunk mesh batching (reduce draw calls)
- Frustum culling (don't render invisible chunks)
- Occlusion culling (don't render hidden faces)
- Level of detail (LOD) for distant chunks
- Vertex deduplication
- Greedy meshing (combine adjacent faces)

**World:**
- Async chunk generation (don't block main thread)
- Chunk caching (serialize to disk)
- Lazy chunk loading (only load in render distance)
- Chunk unloading (remove far chunks from memory)
- Delta compression for network (only send changes)

**Entities:**
- Entity tick distance (don't tick distant entities)
- Mob cap limits (prevent excessive spawning)
- Pathfinding optimization (A* with caching)
- Entity culling (don't render invisible entities)

**Implementation:**
- Profile with cargo flamegraph
- Optimize hot paths
- Multi-threading for chunk generation
- Batch rendering improvements

---

### 10.2 Bug Fixes & Polish

**Known Issues to Fix:**
- Lighting bugs (dark spots, light leaks)
- Chunk seams (blocks not connecting properly)
- Collision edge cases (getting stuck in blocks)
- Mob AI pathfinding (getting stuck, not finding paths)
- Multiplayer desync (client prediction errors)
- Memory leaks (chunks not unloading)
- Crash recovery (graceful error handling)

**Quality of Life:**
- Better error messages
- Loading screen progress bars
- Settings menu (render distance, FOV, controls)
- Options.txt persistence
- Auto-save every 5 minutes
- Backup world files
- Crash reports with logs

**Implementation:**
- Extensive testing
- Bug tracking and prioritization
- User feedback incorporation
- Continuous integration tests

---

## SUCCESS CRITERIA & COMPLETION PROMISE

### Core Requirements (Must Have All)
1. âœ… cargo build: 0 errors, 0 warnings
2. âœ… cargo clippy --all-targets: 0 warnings
3. âœ… cargo test --all: 100% passing
4. âœ… All tool types craftable and functional (pickaxe, shovel, axe, sword, hoe)
5. âœ… Tool-based mining system (blocks require appropriate tools)
6. âœ… Hunger and health regeneration working
7. âœ… Experience system with leveling
8. âœ… Enchanting system (table + bookshelves + at least 10 enchantments)
9. âœ… Brewing system (stand + at least 8 potions)
10. âœ… Village generation in plains biome (at least small villages)
11. âœ… Villager trading (at least 3 professions)
12. âœ… Desert temple generation
13. âœ… Dungeon generation (monster rooms)
14. âœ… The Nether dimension (basic terrain + 3 biomes minimum)
15. âœ… Nether portal mechanics working
16. âœ… At least 5 new hostile mobs (enderman, witch, etc.)
17. âœ… At least 300 total blocks (from current 124)
18. âœ… Concrete blocks (all 16 colors)
19. âœ… All wood variants (9 types with full block set)
20. âœ… Advanced redstone (repeater, comparator, piston)
21. âœ… Sprinting and swimming mechanics
22. âœ… Attack cooldown and shields
23. âœ… At least 5 new crops/plants
24. âœ… Performance: Maintain 60 FPS at 16 chunk render distance

### Target Metrics
- **Feature Completion:** 60-70% (from current 15-20%)
- **Block Count:** 300+ (from 124)
- **Mob Count:** 25+ (from 8)
- **Biome Count:** 20+ (from 14)
- **Structures:** 5+ types (from 0)
- **Dimensions:** 2 (Overworld + Nether)

### Testing Requirements
- All new systems have unit tests
- Integration tests for major features (enchanting, brewing, trading)
- Worldtests for structure generation
- Performance benchmarks pass (chunk generation, rendering)
- Multiplayer stress tests (10+ players)

### Documentation
- CLAUDE.md updated with new architecture
- Recipe book in-game
- F3 debug info shows all relevant data
- README.md has feature list

---

## IMPLEMENTATION STRATEGY

### Incremental Development
- Complete each phase fully before moving to next
- Test thoroughly after each major feature
- Commit frequently with descriptive messages
- Run full test suite after each phase
- Performance benchmark after phases 6, 9, 10

### Code Quality
- Follow existing architecture patterns
- Deterministic systems use seeded RNG
- Network code is server-authoritative
- All gameplay at 20 TPS (SimTick)
- Client prediction for smooth experience
- No floating point in deterministic logic

### Git Workflow
```bash
# After completing each phase
git add .
git commit -m "Phase N: <phase name> - <brief description>"
git push

# Run verification
cargo build
cargo clippy --all-targets
cargo test --all
cargo test --release --test '*worldtest'
```

### Parallel Work Opportunities
Some phases can be worked on simultaneously:
- Blocks (6) can be done alongside Structures (3)
- Mobs (4, 8) can be done alongside Dimensions (5)
- Polish (9) can be done continuously throughout

### Estimated Timeline
- **Phases 1-2 (Critical):** 4-6 weeks
- **Phases 3-5 (Content):** 8-10 weeks
- **Phases 6-8 (Building):** 6-8 weeks
- **Phases 9-10 (Polish):** 4-6 weeks
- **Total:** 22-30 weeks (5.5-7.5 months)

### Prioritization Notes
If time is limited, focus on Phases 1-3 first:
- **Phase 1:** Makes game properly playable (tools, hunger, XP)
- **Phase 2:** Adds depth (enchanting, brewing)
- **Phase 3:** Adds content (structures, exploration)

Phases 4-10 add significant value but aren't blocking:
- **Phase 4-5:** Can start simple (basic villagers, simple nether)
- **Phase 6-8:** Can add blocks/mobs incrementally
- **Phase 9-10:** Polish improves but isn't critical

---

## COMPLETION PROMISE FOR RALPH LOOP

Ralph will consider this task complete when:

```rust
fn is_complete() -> bool {
    let build_passes = cargo_build_warnings() == 0;
    let clippy_passes = cargo_clippy_warnings() == 0;
    let tests_pass = cargo_test_failures() == 0;

    let tools_complete = has_tools(&["pickaxe", "shovel", "axe", "sword", "hoe"])
        && tools_have_all_tiers();

    let systems_complete = has_hunger_system()
        && has_experience_system()
        && has_enchanting_system()
        && has_brewing_system();

    let structures_complete = can_generate_villages()
        && can_generate_desert_temple()
        && can_generate_dungeons();

    let dimensions_complete = has_nether_dimension()
        && nether_portal_works();

    let content_adequate = block_count() >= 300
        && mob_count() >= 25
        && can_craft_concrete_blocks()
        && has_all_wood_variants();

    let performance_ok = fps_at_16_chunks() >= 60
        && chunk_gen_time() < 100; // ms

    build_passes
        && clippy_passes
        && tests_pass
        && tools_complete
        && systems_complete
        && structures_complete
        && dimensions_complete
        && content_adequate
        && performance_ok
}
```

This is a comprehensive, multi-month implementation plan. Take it one phase at a time, test thoroughly, and maintain code quality throughout. The result will be a feature-rich, playable Minecraft clone with solid technical foundations.

Good luck! ðŸŽ®â›ï¸
