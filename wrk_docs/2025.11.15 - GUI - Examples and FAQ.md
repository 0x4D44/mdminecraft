# Examples and FAQ

**Comprehensive guide to using mdminecraft with real-world examples, troubleshooting, and best practices.**

---

## Table of Contents

1. [Real-World Usage Examples](#real-world-usage-examples)
2. [Worldtest Examples](#worldtest-examples)
3. [Tool Usage Workflows](#tool-usage-workflows)
4. [Performance Tuning](#performance-tuning)
5. [FAQ](#faq)
6. [Troubleshooting](#troubleshooting)

---

## Real-World Usage Examples

### Example 1: Singleplayer World Generation

**Scenario:** Generate a deterministic world and explore it locally.

```rust
use mdminecraft_client::Client;
use mdminecraft_world::{TerrainGenerator, ChunkPos};

fn main() -> anyhow::Result<()> {
    // Create a singleplayer client with a specific seed
    let world_seed = 12345u64;
    let mut client = Client::singleplayer_with_seed(world_seed);

    // Generate some chunks around spawn
    let terrain_gen = TerrainGenerator::new(world_seed);
    for x in -2..=2 {
        for z in -2..=2 {
            let chunk = terrain_gen.generate_chunk(ChunkPos::new(x, z));
            // Process chunk...
        }
    }

    // Run game loop
    loop {
        client.frame()?;
        // Handle input, render, etc.
    }
}
```

**Use Cases:**
- Local testing
- Content creation
- Debugging world generation
- Performance profiling

---

### Example 2: Multiplayer Server with Replay Logging

**Scenario:** Run a dedicated server with deterministic replay recording.

```rust
use mdminecraft_server::MultiplayerServer;
use std::net::SocketAddr;
use std::path::PathBuf;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // Initialize tracing for structured logging
    tracing_subscriber::fmt()
        .with_max_level(tracing::Level::INFO)
        .init();

    // Create server bound to port 25565
    let addr: SocketAddr = "0.0.0.0:25565".parse()?;
    let mut server = MultiplayerServer::bind(addr)?;

    // Enable replay logging for later analysis
    let replay_dir = PathBuf::from("replays/session_001");
    server.enable_replay_logging(replay_dir)?;

    tracing::info!("Server started on {}", addr);

    // Main server loop
    loop {
        // Accept new clients
        server.accept_client().await?;

        // Run simulation tick
        server.tick().await?;

        // 20 TPS (50ms per tick)
        tokio::time::sleep(tokio::time::Duration::from_millis(50)).await;
    }
}
```

**Features Used:**
- QUIC-based networking
- Replay logging (inputs.jsonl, events.jsonl)
- Structured logging with tracing
- Async runtime (tokio)

---

### Example 3: Headless World Generation Benchmark

**Scenario:** Generate a large region of terrain headlessly and measure performance.

```rust
use mdminecraft_world::{TerrainGenerator, ChunkPos};
use mdminecraft_testkit::BenchmarkHarness;
use std::time::Instant;

fn main() {
    let world_seed = 42u64;
    let terrain_gen = TerrainGenerator::new(world_seed);

    // Generate 100x100 chunk region (-50 to 50 in both X and Z)
    let start = Instant::now();
    let mut chunk_count = 0;

    for x in -50..=50 {
        for z in -50..=50 {
            let _chunk = terrain_gen.generate_chunk(ChunkPos::new(x, z));
            chunk_count += 1;
        }
    }

    let elapsed = start.elapsed();
    let chunks_per_second = chunk_count as f64 / elapsed.as_secs_f64();

    println!("Generated {} chunks in {:.2}s", chunk_count, elapsed.as_secs_f64());
    println!("Performance: {:.2} chunks/second", chunks_per_second);
}
```

**Output:**
```
Generated 10201 chunks in 45.31s
Performance: 225.13 chunks/second
```

---

### Example 4: Custom Block Registry

**Scenario:** Load a custom block pack for modding.

```rust
use mdminecraft_assets::{registry_from_file, BlockRegistry};
use std::path::Path;

fn main() -> anyhow::Result<()> {
    // Load custom block definitions
    let block_pack_path = Path::new("mods/my_blocks.json");
    let registry = registry_from_file(block_pack_path)?;

    println!("Loaded {} block types", registry.len());

    // Look up blocks by name
    if let Some(diamond_ore_id) = registry.id_by_name("diamond_ore") {
        println!("Diamond ore ID: {}", diamond_ore_id);
    }

    Ok(())
}
```

**Custom Block Pack Format (my_blocks.json):**
```json
{
  "blocks": [
    {
      "name": "air",
      "opaque": false
    },
    {
      "name": "stone",
      "opaque": true
    },
    {
      "name": "diamond_ore",
      "opaque": true
    }
  ]
}
```

---

## Worldtest Examples

Worldtests are large-scale integration tests that validate complex interactions over extended durations.

### Example 5: Creating a Custom Worldtest

**Scenario:** Test mob spawning and lifecycle over 1000 ticks.

```rust
use mdminecraft_testkit::{
    DeterminismValidator, WorldtestHarness, TickRange, WorldSeed,
};
use mdminecraft_world::TerrainGenerator;

#[test]
fn custom_mob_spawning_worldtest() {
    let world_seed = WorldSeed(999);
    let tick_range = TickRange::new(0, 1000);

    // Create worldtest harness
    let mut harness = WorldtestHarness::new(world_seed, tick_range);

    // Add terrain generation
    let terrain_gen = TerrainGenerator::new(world_seed.0);
    harness.set_terrain_generator(terrain_gen);

    // Run simulation
    harness.run();

    // Validate determinism
    let validator = DeterminismValidator::new();
    assert!(validator.validate(&harness), "Worldtest must be deterministic");

    // Check mob spawning
    let mob_count = harness.count_entities_by_type("passive_mob");
    assert!(mob_count > 0, "Expected mobs to spawn");

    println!("‚úÖ Worldtest passed - {} mobs spawned", mob_count);
}
```

---

### Example 6: Running Existing Worldtests

**Run all worldtests:**
```bash
cargo test --test "*_worldtest" --release -- --nocapture
```

**Run specific worldtest:**
```bash
cargo test --test determinism_worldtest --release -- --nocapture
```

**Run with metrics export:**
```bash
cargo test --test large_scale_terrain_worldtest --release -- --nocapture
# Metrics saved to: target/metrics/large_scale_terrain_worldtest.json
```

**Available Worldtests:**
- `determinism_worldtest` - Validates 100% deterministic behavior
- `large_scale_terrain_worldtest` - 10,000 chunks with performance metrics
- `persistence_roundtrip_worldtest` - Save/load validation
- `mob_lifecycle_worldtest` - Entity spawning and behavior
- `stage4_integration_worldtest` - Full system integration
- `biome_seams_worldtest` - Biome boundary continuity

---

## Tool Usage Workflows

### Workflow 1: Performance Regression Detection

**Scenario:** Detect performance regressions in CI/CD pipeline.

**Step 1: Generate baseline metrics**
```bash
# Run baseline worldtest and capture metrics
cargo test --test large_scale_terrain_worldtest --release -- --nocapture
cp target/metrics/large_scale_terrain_worldtest.json target/metrics/baseline.json
```

**Step 2: Make code changes**
```bash
# Edit code, optimize, refactor, etc.
vim crates/world/src/terrain.rs
```

**Step 3: Generate new metrics**
```bash
# Run worldtest again
cargo test --test large_scale_terrain_worldtest --release -- --nocapture
```

**Step 4: Compare metrics**
```bash
# Use metrics-diff tool
cargo run --bin metrics-diff -- \
  target/metrics/baseline.json \
  target/metrics/large_scale_terrain_worldtest.json
```

**Example Output:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           Metrics Diff Report                                ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Metric                     ‚îÇ Baseline ‚îÇ Current  ‚îÇ Change   ‚îÇ Status ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ terrain.chunks_per_second  ‚îÇ   225.11 ‚îÇ   245.78 ‚îÇ   +9.20% ‚îÇ ‚úÖ PASS ‚îÇ
‚îÇ terrain.avg_gen_time_us    ‚îÇ  4442.21 ‚îÇ  4070.52 ‚îÇ   -8.37% ‚îÇ ‚úÖ PASS ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚úÖ SUCCESS: All metrics within acceptable ranges (improvement detected!)
```

**CI Integration (GitHub Actions):**
```yaml
- name: Run baseline worldtest
  run: |
    cargo test --test large_scale_terrain_worldtest --release -- --nocapture
    cp target/metrics/large_scale_terrain_worldtest.json baseline.json

- name: Apply changes and test
  run: |
    cargo test --test large_scale_terrain_worldtest --release -- --nocapture

- name: Check for regressions
  run: |
    cargo run --bin metrics-diff -- \
      baseline.json \
      target/metrics/large_scale_terrain_worldtest.json \
      --threshold-warning 0.05 \
      --threshold-failure 0.10
```

---

### Workflow 2: World Generation Debugging

**Scenario:** Debug terrain generation issues using debug-world tool.

**Step 1: Visualize heightmap**
```bash
cargo run --bin debug-world -- heightmap --seed 12345 --region -2,-2,2,2
```

**Output:**
```
Height range: 58 to 79
Legend: ‚ñà = high, ‚ñì = med-high, ‚ñí = med-low, ‚ñë = low, ¬∑ = very low

‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñì‚ñí‚ñí‚ñë‚ñë¬∑¬∑¬∑¬∑
‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñì‚ñí‚ñí‚ñë‚ñë¬∑¬∑¬∑¬∑
‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñì‚ñí‚ñë‚ñë¬∑¬∑¬∑¬∑
‚ñí‚ñí‚ñì‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì‚ñì‚ñí‚ñë‚ñë¬∑¬∑¬∑
```

**Step 2: Check biome distribution**
```bash
cargo run --bin debug-world -- biomes --seed 12345 --region -5,-5,5,5
```

**Output:**
```
Legend:
  O = Ocean    P = Plains   F = Forest   M = Mountains

OOOOOOOPPPPPPPPPPFFFFFFFFFMMM
OOOOOOOPPPPPPPPPPFFFFFFFFFMMM
OOOOPPPPPPPPPPPPPFFFFFFFFFMMM
PPPPPPPPPPPPPPPPFFFFFFFFFFMMM
```

**Step 3: Validate chunk seams**
```bash
cargo run --bin debug-world -- validate-seams --seed 12345 --region -10,-10,10,10
```

**Output:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë     Seam Validation Results          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

  Total seams checked:     3360
  Mismatches found:        0
  Match rate:              100.00%

‚úÖ SUCCESS: All heightmap seams are perfectly continuous
```

**Step 4: Export visualization for documentation**
```bash
cargo run --bin debug-world -- heightmap \
  --seed 12345 \
  --region -10,-10,10,10 \
  --output docs/heightmap_example.txt
```

---

## Performance Tuning

### Optimization Guidelines

**1. Chunk Generation**

**Problem:** Slow terrain generation
**Solution:** Batch chunk generation and use parallelism

```rust
use rayon::prelude::*;
use mdminecraft_world::{TerrainGenerator, ChunkPos};

fn generate_chunks_parallel(
    terrain_gen: &TerrainGenerator,
    positions: &[ChunkPos]
) -> Vec<Chunk> {
    positions.par_iter()
        .map(|pos| terrain_gen.generate_chunk(*pos))
        .collect()
}
```

**Expected Improvement:** 3-4√ó faster on multi-core systems

---

**2. Persistence I/O**

**Problem:** Slow world save/load
**Solution:** Use region files (already implemented) and async I/O

```rust
use tokio::task;

async fn save_chunks_async(
    store: &RegionStore,
    chunks: Vec<Chunk>
) -> anyhow::Result<()> {
    let handles: Vec<_> = chunks.into_iter()
        .map(|chunk| {
            let store_clone = store.clone();
            task::spawn_blocking(move || {
                store_clone.save_chunk(&chunk)
            })
        })
        .collect();

    for handle in handles {
        handle.await??;
    }

    Ok(())
}
```

**Compression Ratio:** ~498√ó (typical)
**Expected I/O Reduction:** 99.8%

---

**3. Network Bandwidth**

**Problem:** High bandwidth usage
**Solution:** Use delta compression and prediction

```rust
// Server: Send only entity deltas
let delta = entity_tracker.generate_delta(tick, &entities);
connection.send(ServerMessage::EntityDelta(delta)).await?;

// Client: Predict entity positions
client.predict_entity_movement(delta_time);
client.reconcile_with_server_state(server_state);
```

**Expected Bandwidth Reduction:** 70-90%

---

**4. Rendering Performance**

**Problem:** Low frame rate with many visible chunks
**Solution:** Implement frustum culling and mesh caching

```rust
use mdminecraft_render::{ChunkMeshCache, ChunkMeshDriver};

// Cache mesh generation results
let mut cache = ChunkMeshCache::new();
let mut driver = ChunkMeshDriver::new(&mut storage, &mut cache, &registry);

// Only regenerate dirty chunks
let stats = driver.process(); // Only processes chunks that changed
```

**Expected Improvement:** 10-20√ó faster rendering updates

---

### Performance Targets

Based on Stage 5 benchmarks:

| Operation | Target | Actual | Margin |
|-----------|--------|--------|--------|
| Terrain Generation | 100 chunks/sec | 225 chunks/sec | 2.25√ó |
| Chunk Meshing | 50 chunks/sec | 300 chunks/sec | 6√ó |
| Persistence Load | 5ms/chunk | 0.03ms/chunk | 166√ó |
| Network Latency | <100ms | ~20ms | 5√ó |

**How to Measure:**
```bash
# Run performance worldtest
cargo test --test large_scale_terrain_worldtest --release -- --nocapture

# Check metrics
cat target/metrics/large_scale_terrain_worldtest.json
```

---

## FAQ

### General Questions

**Q: What makes mdminecraft deterministic?**

A: Determinism is achieved through:
1. Fixed-seed RNG for all random operations
2. No floating-point math in simulation
3. Server-authoritative state management
4. Tick-based lockstep simulation
5. Extensive determinism validation tests

**Q: Can I use this for a production game?**

A: Yes! The MVP is production-ready with:
- 159 passing tests (100% core functionality)
- Comprehensive worldtests
- Performance benchmarks
- Security considerations (QUIC with TLS)
- Production-grade error handling

**Q: How do I contribute?**

A: See [CONTRIBUTING.md](../CONTRIBUTING.md) for guidelines. Key points:
- Maintain determinism (critical!)
- Write tests for new features
- Follow error handling best practices
- Add metrics for performance-sensitive code

---

### Technical Questions

**Q: How are chunks stored on disk?**

A: Chunks use a region file format:
- 32√ó32 chunks per region file (`.rg` extension)
- zstd compression (level 3)
- CRC32 validation
- Typical compression ratio: 498√ó

**Q: What network protocol is used?**

A: QUIC (UDP-based, modern HTTP/3 transport):
- Multiplexed streams (no head-of-line blocking)
- Built-in encryption (TLS 1.3)
- Connection migration support
- Low latency (~20ms typical)

**Q: How does client prediction work?**

A: Client-side prediction with server reconciliation:
1. Client predicts movement locally (instant feedback)
2. Server sends authoritative state updates
3. Client reconciles prediction with server state
4. Discrepancies corrected with smooth interpolation

**Q: Can I run this on a Raspberry Pi?**

A: Headless server: Yes (tested)
Full client: No (requires GPU with Vulkan/DX12/Metal)

---

### Development Questions

**Q: How do I run tests quickly?**

```bash
# Unit tests only (fast)
cargo test --lib

# Integration tests only
cargo test --test

# Skip slow worldtests
cargo test --lib --bins
```

**Q: How do I debug a failing worldtest?**

1. Run with logging:
   ```bash
   RUST_LOG=debug cargo test --test determinism_worldtest -- --nocapture
   ```

2. Use debug-world tool:
   ```bash
   cargo run --bin debug-world -- heightmap --seed <seed> --region 0,0,5,5
   ```

3. Enable replay logging and analyze:
   ```rust
   server.enable_replay_logging("debug/replay_001")?;
   // Run simulation
   // Analyze replays/inputs.jsonl
   ```

**Q: How do I add a new biome?**

1. Add biome ID to `crates/world/src/biome.rs`:
   ```rust
   pub enum BiomeId {
       // Existing biomes...
       MyCustomBiome,
   }
   ```

2. Add biome data:
   ```rust
   BiomeId::MyCustomBiome => BiomeData {
       id: BiomeId::MyCustomBiome,
       temperature: 0.7,
       humidity: 0.5,
       height_modifier: 0.2,
       // ...
   }
   ```

3. Update biome assignment logic in `BiomeAssigner`

4. Add tests and validate determinism

---

## Troubleshooting

### Common Issues

**Issue: "Chunk not found" panic**

**Symptoms:**
```
thread 'main' panicked at 'Chunk not found at position (5, 3)'
```

**Cause:** Accessing chunk before generation
**Solution:** Generate chunks before accessing:
```rust
let chunk = terrain_gen.generate_chunk(pos);
storage.insert_chunk(chunk);
let chunk_ref = storage.get_chunk(pos).unwrap();
```

---

**Issue: Determinism test failures**

**Symptoms:**
```
assertion failed: hash1 == hash2
```

**Cause:** Non-deterministic code (floating-point, system time, etc.)
**Solution:**
1. Check for floating-point arithmetic in simulation
2. Use fixed-seed RNG for all random operations
3. Avoid system calls (time, filesystem, etc.) in simulation
4. Run determinism worldtest to isolate:
   ```bash
   cargo test --test determinism_worldtest -- --nocapture
   ```

---

**Issue: Poor performance**

**Symptoms:** Low FPS, slow chunk generation

**Diagnosis:**
1. Run performance worldtest:
   ```bash
   cargo test --test large_scale_terrain_worldtest --release
   ```

2. Check metrics:
   ```bash
   cat target/metrics/large_scale_terrain_worldtest.json
   ```

3. Profile with:
   ```bash
   cargo flamegraph --test large_scale_terrain_worldtest
   ```

**Common Causes:**
- Debug build (use `--release`)
- No GPU acceleration (check wgpu adapter)
- Too many chunks loaded (implement unloading)
- Cache misses (check ChunkMeshCache usage)

---

**Issue: Network connection failures**

**Symptoms:**
```
Error: Failed to establish connection: ConnectionRefused
```

**Checklist:**
1. Server running? `ps aux | grep mdminecraft-server`
2. Correct port? Default: 25565
3. Firewall blocking? `sudo ufw allow 25565/udp`
4. QUIC supported? Requires UDP

**Test connection:**
```bash
# Server
cargo run --bin mdminecraft-server --release

# Client (different terminal)
cargo run --bin mdminecraft-client --release -- --server 127.0.0.1:25565
```

---

**Issue: Compilation errors after update**

**Symptoms:**
```
error[E0433]: failed to resolve: use of undeclared crate
```

**Solution:**
```bash
# Clean build artifacts
cargo clean

# Update dependencies
cargo update

# Rebuild
cargo build --release
```

---

### Debug Logging

Enable detailed logging:

```bash
# All debug output
RUST_LOG=debug cargo run

# Specific module
RUST_LOG=mdminecraft_world=trace cargo run

# Multiple modules
RUST_LOG=mdminecraft_world=debug,mdminecraft_net=trace cargo run
```

Structured logging output:
```
INFO server: Server started on 0.0.0.0:25565
DEBUG tick{tick=1000 client_count=3}: Running server tick
DEBUG load_region{region_x=0 region_z=0}: Loading region file path="world/r.0.0.rg"
INFO load_region{region_x=0 region_z=0}: Region file loaded successfully chunk_count=128
```

---

### Getting Help

1. **Check documentation:** `wrk_docs/` directory
2. **Run examples:** See this guide
3. **Search issues:** GitHub issue tracker
4. **Ask questions:** Open a discussion on GitHub
5. **Debug yourself:** Use `debug-world` and logging tools

**Include in bug reports:**
- Rust version (`rustc --version`)
- OS and architecture
- Minimal reproduction steps
- Relevant logs (use `RUST_LOG=debug`)
- Expected vs actual behavior

---

## Conclusion

This guide covers the most common use cases and troubleshooting scenarios for mdminecraft. For more detailed technical information, see:

- [Architecture Overview](2025.11.15%20-%20DOC%20-%20Architecture%20Overview.md)
- [Worldtest Usage Guide](2025.11.15%20-%20DOC%20-%20Worldtest%20Usage%20Guide.md)
- [Error Handling Best Practices](2025.11.15%20-%20GUI%20-%20Error%20Handling%20Best%20Practices.md)
- [Metrics Diff Tool Usage](2025.11.15%20-%20DOC%20-%20Metrics%20Diff%20Tool%20Usage.md)

Happy building! üéÆüåç
